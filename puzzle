#!/bin/bash

# ==========================
# Terminal Puzzle Game
# ==========================

clear
echo "üß† WELCOME TO THE BASH PUZZLE"
echo "Answer all puzzles correctly to unlock the secret."
echo "-----------------------------------------------"

score=0

pause() {
    sleep 1
}

ask() {
    local question="$1"
    local answer="$2"

    read -p "$question > " user_answer
    user_answer=$(echo "$user_answer" | tr 'A-Z' 'a-z')

    if [[ "$user_answer" == "$answer" ]]; then
        echo "‚úÖ Correct!"
        ((score++))
    else
        echo "‚ùå Wrong! Game Over."
        exit 1
    fi
    pause
}

# ==========================
# PUZZLES
# ==========================

ask "Puzzle 1: What command shows your current directory?" "pwd"

ask "Puzzle 2: What symbol represents the home directory?" "~"

ask "Puzzle 3: Which command lists files?" "ls"

ask "Puzzle 4: What file permission means read?" "r"

ask "Puzzle 5: What shell variable stores the current user?" "user"

# ==========================
# FINAL CHALLENGE
# ==========================

echo "-----------------------------------------------"
echo "‚ö° FINAL CHALLENGE"
read -p "Type the number of puzzles you solved: " final_answer

if [[ "$final_answer" -eq "$score" ]]; then
    echo
    echo "üèÜ CONGRATULATIONS!"
    echo "You unlocked the secret message:"
    echo "üëâ 'Bash is not magic ‚Äî it's logic.'"
else
    echo "‚ùå Incorrect. Puzzle locked."
    exit 2
fi

clear
echo "üß† WELCOME TO THE BASH PUZZLE"
echo "Answer all puzzles correctly to unlock the secret."
echo "-----------------------------------------------"

score=0

pause() {
    sleep 1
}

ask() {
    local question="$1"
    local answer="$2"

    read -p "$question > " user_answer
    user_answer=$(echo "$user_answer" | tr 'A-Z' 'a-z')

    if [[ "$user_answer" == "$answer" ]]; then
        echo "‚úÖ Correct!"
        ((score++))
    else
        echo "‚ùå Wrong! Game Over."
        exit 1
    fi
    pause
}

# ==========================
# PUZZLES
# ==========================

ask "Puzzle 1: What command shows your current directory?" "pwd"

ask "Puzzle 2: What symbol represents the home directory?" "~"

ask "Puzzle 3: Which command lists files?" "ls"

ask "Puzzle 4: What file permission means read?" "r"

ask "Puzzle 5: What shell variable stores the current user?" "user"

# ==========================
# FINAL CHALLENGE
# ==========================

echo "-----------------------------------------------"
echo "‚ö° FINAL CHALLENGE"
read -p "Type the number of puzzles you solved: " final_answer

if [[ "$final_answer" -eq "$score" ]]; then
    echo
    echo "üèÜ CONGRATULATIONS!"
    echo "You unlocked the secret message:"
    echo "üëâ 'Bash is not magic ‚Äî it's logic.'"
else
    echo "‚ùå Incorrect. Puzzle locked."
    exit 2
fi
